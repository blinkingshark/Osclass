"use strict";function checkSlugs(e){const t=document.getElementById("e_country_slug"),n=document.getElementById("e_region_slug"),i=document.getElementById("e_city_slug");let o,l;"country"===e?(o=t.value,l=baseUrl+"?page=ajax&action=country_slug&slug="+o,fetch(l).then(e=>e.json()).then(e=>{1===e.error?t.setCustomValidity(stringSlugError):t.setCustomValidity("")})):"region"===e?(o=n.value,l=baseUrl+"?page=ajax&action=region_slug&slug="+o,fetch(l).then(e=>e.json()).then(e=>{1===e.error?n.setCustomValidity(stringSlugError):n.setCustomValidity("")})):"city"===e&&(o=i.value,l=baseUrl+"?page=ajax&action=city_slug&slug="+o,fetch(l).then(e=>e.json()).then(e=>{1===e.error?i.setCustomValidity(stringSlugError):i.setCustomValidity("")}))}function checkLocations(e){let t=document.getElementById(e);0<t.querySelectorAll("input[type='checkbox']:checked").length?"l_countries"===e?document.getElementById("b_remove_country").classList.remove("hide"):"i_regions"===e?document.getElementById("b_remove_region").classList.remove("hide"):"i_cities"===e&&document.getElementById("b_remove_city").classList.remove("hide"):"l_countries"===e?document.getElementById("b_remove_country").classList.add("hide"):"i_regions"===e?document.getElementById("b_remove_region").classList.add("hide"):"i_cities"===e&&document.getElementById("b_remove_city").classList.add("hide")}function deleteMultipleLocations(e){let t;"country"===e?t="l_countries":"region"===e?t="i_regions":"city"===e&&(t="i_cities");let n=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"delete_"+e}];var i=document.getElementById(t).querySelectorAll("input[type='checkbox']:checked");for(let e=0;e<i.length;e++){var o=i[e].value;n.push({name:"id[]",value:o})}toggleLocationModal(stringDeleteTitle,"",stringDelete);e=getHiddenInputs(n);document.getElementById("locationModal").querySelector(".modal-body").appendChild(e);let l=document.createElement("p");l.setAttribute("class","help-block"),l.textContent=stringDeleteWarning,document.getElementById("locationModal").querySelector(".modal-body").appendChild(l)}function showLocations(a,e=null){let t,n,i,c,r;if(e=getLocationElement(a,e))return"region"===a?(document.getElementById("b_new_region").setAttribute("data-c-code",e.dataset.id),document.getElementById("b_new_region").setAttribute("data-s-country",e.dataset.sName),document.getElementById("b_new_region").classList.remove("hide"),document.getElementById("b_new_city").setAttribute("data-c-code",e.dataset.id),document.getElementById("b_new_city").setAttribute("data-s-country",e.dataset.id),document.getElementById("b_new_city").setAttribute("data-id-region",""),document.getElementById("b_new_city").classList.add("hide"),document.getElementById("i_cities").innerText="",c="i_regions",r=document.getElementById(c),i="regions",n="countryId",t=e.dataset.id):"city"===a&&(document.getElementById("b_new_city").classList.remove("hide"),document.getElementById("b_new_city").setAttribute("data-id-region",e.dataset.id),c="i_cities",r=document.getElementById(c),i="cities",n="regionId",t=e.dataset.id),fetchData(baseUrl+"index.php?page=ajax&action="+i+"&"+n+"="+t).then(d=>{if(0<d.length){r.textContent="";for(let l=0,e=d.length;l<e;l++){let t=document.createElement("li");t.setAttribute("class","list-group-item"),t.setAttribute("id",a+"-"+d[l].pk_i_id),t.setAttribute("data-id",d[l].pk_i_id),t.setAttribute("data-s-name",d[l].s_name),t.setAttribute("data-s-slug",d[l].s_slug);let e=document.createElement("input");e.setAttribute("type","checkbox"),e.setAttribute("name",a+"[]"),e.setAttribute("value",d[l].pk_i_id),e.setAttribute("onclick","checkLocations('"+c+"');"),e.setAttribute("class","form-check-input me-1"),t.appendChild(e);let n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("class","close"),n.setAttribute("data-id",d[l].pk_i_id),n.setAttribute("title",stringDelete),n.setAttribute("onclick","deleteLocations(this,'"+a+"')");let i=document.createElement("i");i.setAttribute("class","bi bi-x-circle-fill"),n.appendChild(i),t.appendChild(n);let o=document.createElement("a");if(o.setAttribute("href","#"),o.setAttribute("class","edit mx-1"),o.setAttribute("data-id",d[l].pk_i_id),o.setAttribute("title",stringEdit),o.setAttribute("onclick","editLocations(this,'"+a+"')"),o.textContent=d[l].s_name,t.appendChild(o),"region"===a){let e=document.createElement("a");e.setAttribute("href","#"),e.setAttribute("class","view-more float-end"),e.setAttribute("data-id",d[l].pk_i_id),e.setAttribute("title",stringViewMore),e.setAttribute("onclick","showLocations('city',this)"),e.innerHTML=stringViewMore+"&raquo;",t.appendChild(e)}r.appendChild(t)}}else"region"===a&&(document.getElementById("b_new_region").classList.remove("hide"),document.getElementById("b_new_city").classList.add("hide")),r.innerHTML="<p class='text-center'>No "+a+" found</p>"})}function editLocations(e,t){e=document.getElementById(t+"-"+e.dataset.id);let n=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"edit_"+t}];"country"===t?n.push({name:"country_code",value:e.dataset.id}):n.push({name:t+"_id",value:e.dataset.id}),toggleLocationModal(stringEdit+t,"",stringSave);let i=getHiddenInputs(n),o=document.createElement("div");o.setAttribute("class","mb-3");let l=document.createElement("label");l.textContent=stringName;let d=document.createElement("input");d.setAttribute("name","e_"+t),d.setAttribute("id","e_"+t),d.setAttribute("required","required"),d.setAttribute("class","form-control"),d.setAttribute("placeholder",stringEnter+t+" "+stringName),d.value=e.dataset.sName,o.appendChild(l),o.appendChild(d),i.appendChild(o);let a=document.createElement("div");a.setAttribute("class","mb-3");let c=document.createElement("label");c.textContent=stringSlug;let r=document.createElement("input");r.setAttribute("name","e_"+t+"_slug"),r.setAttribute("id","e_"+t+"_slug"),r.setAttribute("onchange","checkSlugs('"+t+"')"),r.setAttribute("class","form-control"),r.setAttribute("placeholder",stringEnter+t+" "+stringSlug),r.value=e.dataset.sSlug;let s=document.createElement("div");s.setAttribute("class","help-block"),s.textContent=stringSlugWarning,a.appendChild(c),a.appendChild(r),a.appendChild(s),i.appendChild(a),document.getElementById("locationModal").querySelector(".modal-body").appendChild(i)}function deleteLocations(e,t){e=[{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"delete_"+t},{name:"id[]",value:e.dataset.id}];toggleLocationModal(stringDelete+t,"",stringDelete);e=getHiddenInputs(e);let n=document.createElement("div");n.setAttribute("class","mb-3"),n.textContent=stringDeleteWarning,document.getElementById("locationModal").querySelector(".modal-body").appendChild(n),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}function fetchData(e,t=null){let n;return n=null===t?fetch(e):fetch(e,{credentials:t}),n.then(e=>e.json()).catch(e=>{console.log(e)})}function toggleLocationModal(e,t,n){let i=document.getElementById("locationModal");i.querySelector(".modal-body").textContent=t,i.querySelector(".modal-title").textContent=e,i.querySelector("button[type='submit']").textContent=n,new bootstrap.Modal(i).toggle()}function getHiddenInputs(n){let i=document.createElement("fieldset"),o;for(let e=0,t=n.length;e<t;e++)o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name",n[e].name),o.setAttribute("value",n[e].value),i.appendChild(o);return i}function getLocationElement(e,t){let n;return null===t?0<e.length&&0<sCountry.length&&0<sCountryCode.length&&("region"===e?n=document.getElementById("country-"+sCountryCode):"city"===e&&0<sRegionId.length&&(n=document.getElementById("region-"+sRegionId))):"region"===e?n=document.getElementById("country-"+t.dataset.id):"city"===e&&(n=document.getElementById("region-"+t.dataset.id)),n}document.getElementById("b_import").addEventListener("click",function(){let o,l,d;toggleLocationModal(stringImportLocations,stringImportWarning,stringImport);fetchData(locationJsonUrl).then(e=>{o=e.locations;const t=document.createElement("select");t.setAttribute("class","form-select form-select-sm"),t.setAttribute("name","location"),t.setAttribute("id","imported-location"),t.setAttribute("required","required");const n=document.createElement("option");for(n.value="",n.textContent=stringSelectOption,t.appendChild(n),l=0,d=o.length;l<d;l++)if(!jsonExistingCountries.includes(o[l].s_country_name)){const i=document.createElement("option");i.value=o[l].s_file_name,i.textContent=o[l].s_country_name,t.appendChild(i)}a.appendChild(t)});let a=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"locations_import"}]);document.getElementById("locationModal").querySelector(".modal-body").appendChild(a)}),document.getElementById("b_new_country").addEventListener("click",function(){toggleLocationModal(stringAddCountry,"",stringAddCountry);let e=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_country"},{name:"c_manual",value:"1"}]),t=document.createElement("div");t.setAttribute("class","mb-3");let n=document.createElement("label");n.textContent=stringCountry;let i=document.createElement("input");i.setAttribute("name","country"),i.setAttribute("id","country"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringCountryName),t.appendChild(n),t.appendChild(i),e.appendChild(t);let o=document.createElement("div");o.setAttribute("class","mb-3");let l=document.createElement("label");l.textContent=stringCountryCode;let d=document.createElement("input");d.setAttribute("name","c_country"),d.setAttribute("minlength","2"),d.setAttribute("maxlength","2"),d.setAttribute("required","required"),d.setAttribute("id","c_country"),d.setAttribute("class","form-control"),d.setAttribute("placeholder",stringCountryCode),o.appendChild(l),o.appendChild(d),e.appendChild(o),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("b_new_region").addEventListener("click",function(){toggleLocationModal(stringAddRegion,"",stringAddRegion);let e=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_region"},{name:"country_c_parent",value:document.getElementById("b_new_region").dataset.cCode},{name:"country_parent",value:document.getElementById("b_new_region").dataset.sCountry},{name:"r_manual",value:"1"},{name:"region_id",value:""}]),t=document.createElement("div");t.setAttribute("class","mb-3");let n=document.createElement("label");n.textContent=stringRegion;let i=document.createElement("input");i.setAttribute("name","region"),i.setAttribute("id","region"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringRegionName),t.appendChild(n),t.appendChild(i),e.appendChild(t),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("b_new_city").addEventListener("click",function(){toggleLocationModal(stringAddCity,"",stringAddCity);let e=getHiddenInputs([{name:"page",value:"settings"},{name:"action",value:"locations"},{name:"type",value:"add_city"},{name:"country_c_parent",value:document.getElementById("b_new_city").dataset.cCode},{name:"country_parent",value:document.getElementById("b_new_city").dataset.sCountry},{name:"region_parent",value:document.getElementById("b_new_city").dataset.idRegion},{name:"ci_manual",value:"1"},{name:"city_id",value:""}]),t=document.createElement("div");t.setAttribute("class","mb-3");let n=document.createElement("label");n.textContent=stringCity;let i=document.createElement("input");i.setAttribute("name","city"),i.setAttribute("id","city"),i.setAttribute("required","required"),i.setAttribute("class","form-control"),i.setAttribute("placeholder",stringCityName),t.appendChild(n),t.appendChild(i),e.appendChild(t),document.getElementById("locationModal").querySelector(".modal-body").appendChild(e)}),document.getElementById("locationModal").addEventListener("hidden.bs.modal",function(){document.getElementById("locationModal").querySelector(".modal-body").textContent="",document.getElementById("locationModal").querySelector(".modal-title").textContent="",document.getElementById("locationModal").querySelector("button[type='submit']").textContent=""}),document.getElementById("b_remove_country").addEventListener("click",function(){deleteMultipleLocations("country")}),document.getElementById("b_remove_region").addEventListener("click",function(){deleteMultipleLocations("region")}),document.getElementById("b_remove_city").addEventListener("click",function(){deleteMultipleLocations("city")}),""!==sCountry&&""!==sCountryCode&&showLocations("region").then(()=>{""!==sRegionId&&showLocations("city")});
//# sourceMappingURL=location.min.js.map